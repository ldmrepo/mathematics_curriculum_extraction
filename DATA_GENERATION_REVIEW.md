# ğŸ“‹ ë°ì´í„° ìƒì„± ë°©ë²• ê²€í†  ë³´ê³ ì„œ

## ğŸ” ê²€í†  ëŒ€ìƒ
PostgreSQL ì—°ê²° í…Œì´ë¸” ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ë¶„ì„

---

## ğŸš¨ í•˜ë“œì½”ë”© ë° ëª©ì—… ë°ì´í„° ì‚¬ìš© í˜„í™©

### 1. **achievement_standard_relations** âœ… ì‹¤ì œ ë°ì´í„°
- **ì†ŒìŠ¤**: Neo4j ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤
- **ë°©ë²•**: AIê°€ Phase 2-3ì—ì„œ ì¶”ì¶œí•œ ì‹¤ì œ ê´€ê³„ ë°ì´í„°ë¥¼ PostgreSQLë¡œ ë™ê¸°í™”
- **í’ˆì§ˆ**: ì‹¤ì œ AI ë¶„ì„ ê²°ê³¼ ê¸°ë°˜ (148ê°œ ê´€ê³„)

### 2. **standard_terms** âš ï¸ ë‹¨ìˆœ í‚¤ì›Œë“œ ë§¤ì¹­
```python
# ì‹¤ì œ ì½”ë“œ
if term_name and term_name in std_content:
    confidence = min(len(term_name) / 100, 1.0)  # ë‹¨ìˆœí•œ ê¸¸ì´ ê¸°ë°˜ ê³„ì‚°
```
- **ë¬¸ì œì **: 
  - ë‹¨ìˆœ ë¬¸ìì—´ í¬í•¨ ì—¬ë¶€ë§Œ í™•ì¸
  - ì‹ ë¢°ë„ ê³„ì‚°ì´ ìš©ì–´ ê¸¸ì´ / 100 ìœ¼ë¡œ ë¬´ì˜ë¯¸
  - ë¬¸ë§¥ ê³ ë ¤ ì—†ìŒ

### 3. **standard_competencies** âš ï¸ í•˜ë“œì½”ë”©ëœ í‚¤ì›Œë“œ
```python
competency_keywords = {
    1: ['ë¬¸ì œ', 'í•´ê²°', 'ì „ëµ'],     # í•˜ë“œì½”ë”©ëœ í‚¤ì›Œë“œ
    2: ['ì¶”ë¡ ', 'ë…¼ë¦¬', 'ì¦ëª…'],
    3: ['ì°½ì˜', 'ìœµí•©', 'íƒêµ¬'],
    4: ['ì˜ì‚¬ì†Œí†µ', 'í‘œí˜„', 'ì„¤ëª…'],
    5: ['ì •ë³´', 'ê³µí•™', 'ê¸°ìˆ ']
}
```
- **ë¬¸ì œì **:
  - í‚¤ì›Œë“œê°€ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŒ
  - êµìœ¡ê³¼ì • ì „ë¬¸ê°€ ê²€í†  ì—†ì´ ì„ì˜ ì„¤ì •

### 4. **standard_representations** âš ï¸ í•˜ë“œì½”ë”© + ê¸°ë³¸ê°’
```python
if rep_id == 9:  # ê¸°íƒ€ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì¶”ê°€
    if not found_any:
        mappings.append((
            std_id, rep_id, 
            "Default representation",  # ëª©ì—… í…ìŠ¤íŠ¸
            None, 'rule', 0.5, "Default"
        ))
```
- **ë¬¸ì œì **:
  - ë§¤ì¹­ ì•ˆ ë˜ë©´ ë¬´ì¡°ê±´ "ê¸°íƒ€"ë¡œ ì²˜ë¦¬
  - ê¸°ë³¸ê°’ 0.5 ì‹ ë¢°ë„ ì„ì˜ ì„¤ì •

### 5. **learning_elements** ğŸ”´ ì™„ì „ í•˜ë“œì½”ë”©
```python
element_names = [
    'ìˆ˜ì™€ ì—°ì‚°ì˜ ì´í•´',      # í•˜ë“œì½”ë”©ëœ ì´ë¦„ë“¤
    'ê¸°í•˜í•™ì  ì‚¬ê³ ',
    'ì¸¡ì •ê³¼ ë‹¨ìœ„',
    'ìë£Œì˜ ìˆ˜ì§‘ê³¼ ì •ë¦¬',
    'í™•ë¥ ê³¼ í†µê³„'
]
# ëª¨ë“  ë„ë©”ì¸ì— ë™ì¼í•œ ìš”ì†Œëª… ì‚¬ìš©
f"{elem_name} - Level {level_id}"  # ë‹¨ìˆœ í…ìŠ¤íŠ¸ ì¡°í•©
```
- **ë¬¸ì œì **:
  - ì‹¤ì œ êµìœ¡ê³¼ì •ê³¼ ë¬´ê´€í•œ ì„ì˜ ìš”ì†Œëª…
  - ë„ë©”ì¸ë³„ íŠ¹ì„± ë¬´ì‹œ

### 6. **standard_contexts** ğŸ”´ ëœë¤ ìƒì„±
```python
# ëœë¤ìœ¼ë¡œ ë§¥ë½ í• ë‹¹
selected_contexts = random.sample(range(1, 5), k=random.randint(1, 2))
confidence = random.uniform(0.6, 0.9)  # ëœë¤ ì‹ ë¢°ë„
```
- **ë¬¸ì œì **:
  - ì™„ì „ ëœë¤ í• ë‹¹
  - ì‹¤ì œ ì„±ì·¨ê¸°ì¤€ ë‚´ìš©ê³¼ ë¬´ê´€

### 7. **domain_achievement_levels** ğŸ”´ ê³ ì •ê°’ ì‚¬ìš©
```python
'A' as level_code,  -- ì„ì‹œë¡œ ê³ ì •ê°’ ì‚¬ìš©
level_desc = {
    'A': 'ìƒ ìˆ˜ì¤€ - ì‹¬í™” í•™ìŠµ ê°€ëŠ¥',  # í•˜ë“œì½”ë”©ëœ ì„¤ëª…
    'B': 'ì¤‘ìƒ ìˆ˜ì¤€ - ê¸°ë³¸ ê°œë… ìˆ™ë‹¬',
    ...
}
```
- **ë¬¸ì œì **:
  - ëª¨ë“  ë ˆì½”ë“œê°€ 'A' ë ˆë²¨ë¡œ ê³ ì •
  - ì‹¤ì œ ì„±ì·¨ìˆ˜ì¤€ ë¶„í¬ ë¬´ì‹œ

---

## ğŸ“Š ë°ì´í„° í’ˆì§ˆ í‰ê°€

| í…Œì´ë¸” | ì‹¤ì œ ë°ì´í„° | í’ˆì§ˆ ë“±ê¸‰ | ë¬¸ì œ ìˆ˜ì¤€ |
|--------|------------|-----------|-----------|
| achievement_standard_relations | âœ… Neo4j AI ë¶„ì„ | **A** | ì—†ìŒ |
| standard_terms | âš ï¸ í‚¤ì›Œë“œ ë§¤ì¹­ | **C** | ì¤‘ê°„ |
| standard_competencies | âš ï¸ í•˜ë“œì½”ë”© í‚¤ì›Œë“œ | **D** | ë†’ìŒ |
| standard_representations | âš ï¸ í•˜ë“œì½”ë”©+ê¸°ë³¸ê°’ | **D** | ë†’ìŒ |
| learning_elements | ğŸ”´ ì™„ì „ í•˜ë“œì½”ë”© | **F** | ë§¤ìš° ë†’ìŒ |
| standard_contexts | ğŸ”´ ëœë¤ ìƒì„± | **F** | ë§¤ìš° ë†’ìŒ |
| domain_achievement_levels | ğŸ”´ ê³ ì •ê°’ | **F** | ë§¤ìš° ë†’ìŒ |

---

## ğŸ¯ ê°œì„  ë°©ì•ˆ

### ì¦‰ì‹œ ê°œì„  í•„ìš” (Priority 1)
1. **learning_elements**: ì‹¤ì œ êµìœ¡ê³¼ì • í•™ìŠµìš”ì†Œ ì¶”ì¶œ
2. **standard_contexts**: AI ê¸°ë°˜ ë§¥ë½ ë¶„ì„
3. **domain_achievement_levels**: ì‹¤ì œ ì„±ì·¨ìˆ˜ì¤€ ë°ì´í„° ì§‘ê³„

### ì¤‘ê¸° ê°œì„  (Priority 2)
4. **standard_competencies**: êµìœ¡ ì „ë¬¸ê°€ ê²€ì¦ëœ í‚¤ì›Œë“œ
5. **standard_representations**: AI ê¸°ë°˜ í‘œí˜„ë°©ë²• ë¶„ë¥˜

### ì¥ê¸° ê°œì„  (Priority 3)
6. **standard_terms**: NLP ê¸°ë°˜ ì˜ë¯¸ì  ë§¤ì¹­
7. ì „ì²´ ë°ì´í„° êµìœ¡ ì „ë¬¸ê°€ ê²€ì¦

---

## âš¡ ê°œì„ ëœ êµ¬í˜„ ì˜ˆì‹œ

### 1. AI ê¸°ë°˜ ì—­ëŸ‰ ë§¤í•‘
```python
async def map_competencies_with_ai():
    prompt = f"""
    ì„±ì·¨ê¸°ì¤€: {standard_content}
    
    ë‹¤ìŒ ìˆ˜í•™ êµê³¼ ì—­ëŸ‰ ì¤‘ ê´€ë ¨ëœ ê²ƒì„ ì„ íƒí•˜ê³  ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”:
    1. ë¬¸ì œí•´ê²°
    2. ì¶”ë¡ 
    3. ì°½ì˜Â·ìœµí•©
    4. ì˜ì‚¬ì†Œí†µ
    5. ì •ë³´ì²˜ë¦¬
    6. íƒœë„ ë° ì‹¤ì²œ
    """
    response = await ai_model.generate(prompt)
    return parse_competencies(response)
```

### 2. ì‹¤ì œ í•™ìŠµìš”ì†Œ ì¶”ì¶œ
```python
def extract_real_learning_elements():
    # content_elements í…Œì´ë¸”ì—ì„œ ì‹¤ì œ ë°ì´í„° í™œìš©
    query = """
        SELECT DISTINCT 
            element_content,
            domain_id,
            level_id
        FROM curriculum.content_elements
        WHERE element_type = 'í•™ìŠµìš”ì†Œ'
    """
    return cursor.fetchall()
```

### 3. ë§¥ë½ ë¶„ì„ ê¸°ë°˜ ë§¤í•‘
```python
def analyze_context(standard_content):
    contexts = []
    if any(word in standard_content for word in ['ìƒí™œ', 'ì‹¤ìƒí™œ', 'ì¼ìƒ']):
        contexts.append('ì¼ìƒìƒí™œ')
    if any(word in standard_content for word in ['ê³¼í•™', 'ë¯¸ìˆ ', 'ìŒì•…']):
        contexts.append('íƒ€êµê³¼')
    # ... ê·œì¹™ ê¸°ë°˜ + AI ë¶„ì„ ì¡°í•©
    return contexts
```

---

## ğŸ”´ ê²°ë¡ 

### í˜„ì¬ ìƒíƒœ
- **ì‹¤ì œ ë°ì´í„° ë¹„ìœ¨**: ì•½ 20% (1/7 í…Œì´ë¸”ë§Œ ì‹¤ì œ ë°ì´í„°)
- **í•˜ë“œì½”ë”©/ëª©ì—… ë¹„ìœ¨**: ì•½ 80%
- **ë°ì´í„° ì‹ ë¢°ë„**: ë‚®ìŒ

### ê¶Œì¥ì‚¬í•­
1. **ì¦‰ì‹œ**: í”„ë¡œë•ì…˜ ì‚¬ìš© ì „ ë°˜ë“œì‹œ ê°œì„  í•„ìš”
2. **ë‹¨ê¸°**: AI ëª¨ë¸ í™œìš©í•œ ì¬ìƒì„±
3. **ì¥ê¸°**: êµìœ¡ ì „ë¬¸ê°€ ê²€ì¦ í”„ë¡œì„¸ìŠ¤ êµ¬ì¶•

### ìœ„í—˜ë„
- ğŸ”´ **ë†’ìŒ**: í˜„ì¬ ë°ì´í„°ë¡œ êµìœ¡ ì„œë¹„ìŠ¤ ìš´ì˜ ì‹œ ì‹ ë¢°ì„± ë¬¸ì œ
- ğŸŸ¡ **ì¤‘ê°„**: ê°œë°œ/í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œëŠ” ì‚¬ìš© ê°€ëŠ¥
- ğŸŸ¢ **ë‚®ìŒ**: achievement_standard_relationsë§Œ ì‹ ë¢° ê°€ëŠ¥

---

*ê²€í†  ì™„ë£Œ: 2024-12-27*
*ê¶Œì¥ ì¡°ì¹˜: í”„ë¡œë•ì…˜ ë°°í¬ ì „ ë°ì´í„° ì¬ìƒì„± í•„ìˆ˜*