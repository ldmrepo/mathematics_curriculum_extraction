# Knowledge Graph Project ì‹¤í–‰ ê°€ì´ë“œ

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

2022 ê°œì • ìˆ˜í•™ê³¼ êµìœ¡ê³¼ì •ì„ ê¸°ë°˜ìœ¼ë¡œ AI ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ì§€ì‹ ê·¸ë˜í”„ë¥¼ êµ¬ì¶•í•˜ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

- **ì„±ì·¨ê¸°ì¤€**: 181ê°œ
- **ì„±ì·¨ìˆ˜ì¤€**: 663ê°œ
- **AI ëª¨ë¸**: GPT-5, Claude 4, Gemini 2.5 Pro
- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL 16 + Neo4j 4.4

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PostgreSQL DB                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ achievement  â”‚  â”‚   v1.3.0     â”‚  â”‚    Core      â”‚  â”‚
â”‚  â”‚  standards   â”‚  â”‚    Views     â”‚  â”‚   Tables     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Manager                          â”‚
â”‚         Extract & Process Curriculum Data                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AI Pipeline Phases                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Phase 1  â”‚â†’ â”‚ Phase 2  â”‚â†’ â”‚ Phase 3  â”‚â†’ â”‚Phase 4 â”‚ â”‚
â”‚  â”‚ Gemini   â”‚  â”‚  GPT-5   â”‚  â”‚ Sonnet 4 â”‚  â”‚Opus 4.1â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Neo4j Graph                         â”‚
â”‚              Knowledge Graph Database                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ì‹¤í–‰ ì¤€ë¹„

### 1. í™˜ê²½ ìš”êµ¬ì‚¬í•­

- **Python**: 3.8 ì´ìƒ
- **Docker**: 20.10 ì´ìƒ
- **ë©”ëª¨ë¦¬**: ìµœì†Œ 8GB RAM
- **ë””ìŠ¤í¬**: 10GB ì—¬ìœ  ê³µê°„

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ ìƒì„±:

```bash
# AI API Keys
OPENAI_API_KEY=sk-xxx
ANTHROPIC_API_KEY=sk-ant-xxx
GOOGLE_API_KEY=xxx

# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/mathematics_curriculum
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j123

# Cost Control
MAX_DAILY_COST=200.0
COST_ALERT_THRESHOLD=150.0
BATCH_SIZE=10
MAX_CONCURRENT_REQUESTS=5
```

### 3. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd knowledge_graph_project
pip install -r requirements.txt
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì¤€ë¹„

```bash
# PostgreSQL ì‹œì‘
cd ../database
docker-compose up -d

# ë°ì´í„° ë¡œë“œ í™•ì¸
docker exec curriculum-postgres psql -U postgres -d mathematics_curriculum \
  -c "SELECT COUNT(*) FROM curriculum.achievement_standards;"
# Expected: 181
```

## ğŸ“Š ì‹¤í–‰ ë‹¨ê³„ë³„ ìƒì„¸

### Phase 0: ë°ì´í„° ì¶”ì¶œ

**ëª©ì **: PostgreSQLì—ì„œ ëª¨ë“  êµìœ¡ê³¼ì • ë°ì´í„° ì¶”ì¶œ

```python
from src.data_manager import DatabaseManager

db_manager = DatabaseManager()
curriculum_data = db_manager.extract_all_curriculum_data()
```

**ì¶”ì¶œ ë°ì´í„°**:
- `achievement_standards`: 181ê°œ ì„±ì·¨ê¸°ì¤€
- `achievement_levels`: 663ê°œ ì„±ì·¨ìˆ˜ì¤€
- `content_elements`: 291ê°œ ë‚´ìš©ìš”ì†Œ
- `terms_symbols`: 362ê°œ ìš©ì–´/ê¸°í˜¸
- `prerequisite_suggestions`: ì„ ìˆ˜í•™ìŠµ ì œì•ˆ (v1.3.0 ë·°)
- `horizontal_suggestions`: ìˆ˜í‰ ê´€ê³„ ì œì•ˆ (v1.3.0 ë·°)
- `competencies`: 5ê°œ êµê³¼ ì—­ëŸ‰
- `representation_types`: 9ê°œ í‘œìƒ íƒ€ì…

### Phase 1: ê¸°ì´ˆ êµ¬ì¡° ì„¤ê³„ (Gemini 2.5 Pro)

**ëª©ì **: ì§€ì‹ ê·¸ë˜í”„ì˜ ì „ì²´ êµ¬ì¡° ì„¤ê³„

**ì²˜ë¦¬ ë‚´ìš©**:
1. ë…¸ë“œ íƒ€ì… ì •ì˜
   - AchievementStandard (ì„±ì·¨ê¸°ì¤€)
   - AchievementLevel (ì„±ì·¨ìˆ˜ì¤€)
   - Domain (ìˆ˜í•™ ì˜ì—­)
   - GradeLevel (í•™ë…„êµ°)
   - Competency (êµê³¼ ì—­ëŸ‰)
   - RepresentationType (í‘œìƒ íƒ€ì…)

2. ê´€ê³„ ì¹´í…Œê³ ë¦¬ ì„¤ê³„
   - êµ¬ì¡°ì  ê´€ê³„
   - í•™ìŠµ ìˆœì„œ ê´€ê³„
   - ì˜ë¯¸ì  ê´€ê³„

3. ì»¤ë®¤ë‹ˆí‹° í´ëŸ¬ìŠ¤í„° ì •ì˜
4. ê³„ì¸µ êµ¬ì¡° ì„¤ê³„

**ë¹„ìš©**: $1-2 (Gemini 2.5 Pro, 1M context)

### Phase 2: ê´€ê³„ ì¶”ì¶œ (GPT-5)

**ëª©ì **: ì„±ì·¨ê¸°ì¤€ ê°„ ê´€ê³„ ì¶”ì¶œ

**ì²˜ë¦¬ ë‚´ìš©**:
1. **DB ì œì•ˆ í™œìš©** (ê·œì¹™ ê¸°ë°˜)
   - prerequisite_suggestions â†’ ì„ ìˆ˜í•™ìŠµ ê´€ê³„
   - horizontal_suggestions â†’ ìˆ˜í‰ ê´€ê³„

2. **AI ì¶”ê°€ ì¶”ì¶œ**
   - ìœ ì‚¬ë„ ê´€ê³„ (similarity)
   - ì˜ì—­ ê°„ ì—°ê²° (domain_bridge)
   - í•™ë…„ ì§„í–‰ ê´€ê³„ (grade_progression)

**ìµœì í™”**:
- ë°°ì¹˜ í¬ê¸°: 10ê°œì”© ì²˜ë¦¬
- ë„ë©”ì¸ë³„ ê·¸ë£¹í™”ë¡œ íš¨ìœ¨ì„± í–¥ìƒ
- DB ì œì•ˆ ìš°ì„  í™œìš©ìœ¼ë¡œ API í˜¸ì¶œ ìµœì†Œí™”

**ë¹„ìš©**: $3-5 (GPT-5)

### Phase 3: ê´€ê³„ ì •ì œ (Claude Sonnet 4)

**ëª©ì **: ì¶”ì¶œëœ ê´€ê³„ ì •ì œ ë° êµìœ¡ì  ë©”íƒ€ë°ì´í„° ì¶”ê°€

**ì²˜ë¦¬ ë‚´ìš©**:
1. **ê´€ê³„ íƒ€ì… ì„¸ë¶„í™”**
   ```
   prerequisite â†’ prerequisite_conceptual (ê°œë…ì )
                â†’ prerequisite_procedural (ì ˆì°¨ì )
                â†’ prerequisite_cognitive (ì¸ì§€ì )
   ```

2. **ê°€ì¤‘ì¹˜ ì¡°ì •**
   - êµìœ¡ì  ì¤‘ìš”ë„ ë°˜ì˜
   - í•™ìŠµ í•„ìˆ˜ë„ ê³ ë ¤

3. **êµìœ¡ ë©”íƒ€ë°ì´í„° ì¶”ê°€**
   - ë‚œì´ë„ ì „ì´ (easyâ†’medium)
   - ì¸ì§€ ìˆ˜ì¤€ (ê¸°ì–µ, ì´í•´, ì ìš©, ë¶„ì„)
   - êµìˆ˜ ì „ëµ (ì§ì ‘êµìˆ˜, íƒêµ¬í•™ìŠµ)
   - í‰ê°€ ë°©ë²• (ì§€í•„í‰ê°€, ìˆ˜í–‰í‰ê°€)

4. **ëˆ„ë½ ê´€ê³„ ì‹ë³„**
5. **ì¤‘ë³µ/ì¶©ëŒ í•´ê²°**

**ë¹„ìš©**: $2-3 (Claude Sonnet 4, thinking_budget: 3000)

### Phase 4: ê²€ì¦ ë° ìµœì í™” (Claude Opus 4.1)

**ëª©ì **: ì „ì²´ ê·¸ë˜í”„ ê²€ì¦ ë° í’ˆì§ˆ í‰ê°€

**ì²˜ë¦¬ ë‚´ìš©**:
1. **ì‚¬ì´í´ ê²€ì¶œ**
   - DFS ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìˆœí™˜ ì°¸ì¡° ê²€ì¶œ
   - DB í•¨ìˆ˜ `detect_prerequisite_cycles()` í™œìš©

2. **ì¼ê´€ì„± ê²€ì¦**
   - êµ¬ì¡°ì  ì™„ì „ì„± (ê³ ë¦½ ë…¸ë“œ, ì—°ê²°ì„±)
   - êµìœ¡ì  íƒ€ë‹¹ì„± (êµìœ¡ê³¼ì • ì¤€ìˆ˜)
   - ë…¼ë¦¬ì  ì¼ê´€ì„± (ëª¨ìˆœ ê´€ê³„)

3. **ì»¤ë²„ë¦¬ì§€ ë¶„ì„**
   - ë…¸ë“œ ì»¤ë²„ë¦¬ì§€: 181ê°œ ì„±ì·¨ê¸°ì¤€
   - ê´€ê³„ ì»¤ë²„ë¦¬ì§€: ì˜ˆìƒ ëŒ€ë¹„ ì‹¤ì œ

4. **í’ˆì§ˆ í‰ê°€**
   ```json
   {
     "completeness": 18/25,
     "accuracy": 19/25,
     "usability": 17/25,
     "innovation": 16/25,
     "total_score": 70/100,
     "grade": "B"
   }
   ```

5. **ìµœì í™” ê¶Œì¥ì‚¬í•­**

**ë¹„ìš©**: $5-7 (Claude Opus 4.1, thinking_budget: 10000)

### Phase 5: Neo4j ê·¸ë˜í”„ êµ¬ì¶•

**ëª©ì **: ìµœì¢… ì§€ì‹ ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•

**ì²˜ë¦¬ ë‚´ìš©**:
1. ë…¸ë“œ ìƒì„±
2. ê´€ê³„ ìƒì„±
3. ì¸ë±ìŠ¤ ìƒì„±
4. ì œì•½ì¡°ê±´ ì„¤ì •

**ì¿¼ë¦¬ ì˜ˆì‹œ**:
```cypher
// ì„ ìˆ˜í•™ìŠµ ì²´ì¸ ì¡°íšŒ
MATCH path = (start:AchievementStandard)-[:PREREQUISITE*1..5]->(end:AchievementStandard {code: $code})
RETURN path

// ìœ ì‚¬ ì„±ì·¨ê¸°ì¤€ ì¡°íšŒ
MATCH (s1:AchievementStandard {code: $code})-[r:SIMILAR_TO]-(s2:AchievementStandard)
RETURN s2.code, r.weight
ORDER BY r.weight DESC
```

## ğŸ’» ì‹¤í–‰ ëª…ë ¹ì–´

### ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰

```bash
cd knowledge_graph_project
python main.py
```

### íŠ¹ì • ë‹¨ê³„ë¶€í„° ì¬ì‹œì‘

```bash
# Phase 3ë¶€í„° ì¬ì‹œì‘
python main.py --resume-from 3
```

### ê°œë³„ ë‹¨ê³„ë§Œ ì‹¤í–‰

```bash
# Phase 2ë§Œ ì‹¤í–‰
python main.py --phase-only 2
```

### ëŒ€ì‹œë³´ë“œ ì‹¤í–‰

```bash
streamlit run dashboard.py
```

## ğŸ“ˆ ì˜ˆìƒ ì„±ëŠ¥ ì§€í‘œ

| ì§€í‘œ | ëª©í‘œ | í˜„ì¬ |
|------|------|------|
| ì„±ì·¨ê¸°ì¤€ ì»¤ë²„ë¦¬ì§€ | 100% | 100% |
| ê´€ê³„ ì •í™•ë„ | 85% | 75% |
| ì‚¬ì´í´ ì—†ìŒ | Yes | Yes |
| ì²˜ë¦¬ ì‹œê°„ | <30ë¶„ | 15-22ë¶„ |
| API ë¹„ìš© | <$20 | $11-17 |

## ğŸ“ ì¶œë ¥ íŒŒì¼

```
output/
â”œâ”€â”€ curriculum_data.json           # ì¶”ì¶œëœ ë°ì´í„°
â”œâ”€â”€ phase1_foundation_design.json  # êµ¬ì¡° ì„¤ê³„
â”œâ”€â”€ phase2_relationship_extraction.json  # ê´€ê³„ ì¶”ì¶œ
â”œâ”€â”€ phase3_refinement_results.json # ì •ì œ ê²°ê³¼
â”œâ”€â”€ phase4_validation_results.json # ê²€ì¦ ê²°ê³¼
â”œâ”€â”€ graph_statistics.json          # ê·¸ë˜í”„ í†µê³„
â”œâ”€â”€ final_report.json              # ìµœì¢… ë³´ê³ ì„œ
â””â”€â”€ executive_summary.md           # ìš”ì•½ ë³´ê³ ì„œ
```

## ğŸ” ëª¨ë‹ˆí„°ë§

### ë¡œê·¸ í™•ì¸

```bash
tail -f logs/knowledge_graph_*.log
```

### ë¹„ìš© ëª¨ë‹ˆí„°ë§

ë¡œê·¸ì—ì„œ ë¹„ìš© ì¶”ì :
```
Phase 1 Usage Stats: {'total_cost': 1.25, ...}
Phase 2 Usage Stats: {'total_cost': 3.50, ...}
```

### ì§„í–‰ ìƒí™© í™•ì¸

```bash
# PostgreSQL ìƒíƒœ
docker exec curriculum-postgres psql -U postgres -d mathematics_curriculum \
  -c "SELECT COUNT(*) FROM curriculum.achievement_standard_relations;"

# Neo4j ìƒíƒœ
curl http://localhost:7474/db/data/
```

## âš ï¸ ë¬¸ì œ í•´ê²°

### API í‚¤ ì˜¤ë¥˜
```
Error: Invalid API key
```
**í•´ê²°**: `.env` íŒŒì¼ì˜ API í‚¤ í™•ì¸

### ë©”ëª¨ë¦¬ ë¶€ì¡±
```
Error: Out of memory
```
**í•´ê²°**: Docker ë©”ëª¨ë¦¬ í• ë‹¹ ì¦ê°€ (ìµœì†Œ 4GB)

### ì‚¬ì´í´ ê²€ì¶œ
```
Warning: Found cycles in prerequisite relationships
```
**í•´ê²°**: Phase 4ì—ì„œ ìë™ìœ¼ë¡œ ì‚¬ì´í´ ì œê±° ì œì•ˆ

### ë¹„ìš© í•œë„ ì´ˆê³¼
```
Error: Daily cost limit exceeded
```
**í•´ê²°**: `MAX_DAILY_COST` ì¦ê°€ ë˜ëŠ” ë‹¤ìŒë‚  ì¬ì‹¤í–‰

## ğŸ“ ì§€ì›

- **GitHub Issues**: https://github.com/your-repo/issues
- **Documentation**: https://docs.your-project.com
- **Email**: support@your-project.com

---

*Last Updated: 2025-08-25*
*Version: 1.0.0*